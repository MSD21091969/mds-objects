Prompt voor Code Assistent:

Voer de volgende refactoring uit voor de google_sheets toolset om de authenticatie te moderniseren naar de nieuwe CredentialManager-architectuur.

Instructies:

Pas service.py aan:

Bestand: src/components/toolsets/google_workspace/sheets/service.py

Wijzigingen:

Importeer de GoogleCredentialManager in plaats van de DatabaseManager.

Pas de __init__ methode aan om een credential_manager: GoogleCredentialManager te accepteren in plaats van een db_manager.

Vervang in alle methoden de aanroep service = await self.get_service_for_user(user_id) door service = await self.get_service(user_id).

Verifieer google_sheets_toolset.py:

Bestand: src/components/toolsets/google_workspace/sheets/google_sheets_toolset.py

Actie: Dit bestand is al correct gestructureerd. Controleer of de _get_user_id_from_context helper-methode de user_id correct verkrijgt en doorgeeft aan elke aanroep van de sheets_service (bv. await self._sheets_service.create_spreadsheet(user_id=user_id, ...)). Er zijn hier waarschijnlijk geen wijzigingen nodig.

Verifieer models.py:

Bestand: src/components/toolsets/google_workspace/sheets/models.py

Actie: Controleer of dit bestand enkel de Pydantic-modellen GoogleSheet, SheetProperties en ValueRange bevat. Er zijn hier geen aanpassingen nodig.